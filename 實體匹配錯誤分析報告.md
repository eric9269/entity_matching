# 實體匹配模型錯誤分析報告

## 概要統計

基於對7個不同模型的錯誤分析，以下為False Negative（實際匹配但預測不匹配）案例的統計：

| 模型 | 總測試樣本 | False Negative數量 | 錯誤率 | 閾值 |
|------|------------|-------------------|--------|------|
| 10-qwen3-embedding-4b-lora | 1844 | 14 | 0.042 | 0.225 |
| 13-qwen3-embedding-4b-lora | 1844 | 10 | - | - |
| 15-BAAI-bge-large-zh-v1.5 | 1844 | 19 | 0.037 | 0.475 |
| 15-multilingual-e5-large | 1844 | 17 | - | - |
| 15-multilingual-e5-small | 1844 | 18 | 0.030 | 0.65 |
| 15-text2vec-base-chinese | 1844 | 30 | 0.039 | 0.55 |
| 15-text2vec-large-chinese | 1844 | 3 | - | - |

**總計分析案例：111個False Negative案例**

## 錯誤類型分析

### 1. 型號差異類錯誤 (35.1% - 39案例)

#### 1.1 顏色型號差異 (最嚴重)
**案例1：Coleman睡袋**
- e1: `Coleman 表演者III 白灰睡袋 C15 / CM-34776M000`
- e2: `【Coleman】表演者III / C10 / 黃睡袋(CM-34775M000)`
- **分析**：型號從CM-34776M000變為CM-34775M000，溫度等級從C15變為C10，顏色從白灰變為黃色
- **相似度分數**：極低（0.0315-0.5057）
- **影響**：在多個模型中都出現此錯誤

**案例2：MSI螢幕型號**
- e1: `MSI 微星 Modern MD342CQPW 曲面美型螢幕`
- e2: `【MSI 微星】Modern MD342CQP 34型 VA UWQHD 120Hz 美型曲面螢幕`
- **分析**：型號從MD342CQPW變為MD342CQP（少了W），但實際為同一產品的不同版本
- **相似度分數**：0.1302-0.3257
- **影響**：所有模型都無法正確識別此類微小型號差異

#### 1.2 版本型號差異
**案例3：TOMICA玩具車**
- e1: `TAKARA TOMY TOMICA PREMIUM 43 豐田Alphard一般 TM95574`
- e2: `【TOMICA】43 豐田Alphard 初回+普版 二入組`
- **分析**：一個強調"一般"版本，另一個強調"初回+普版"，但都是同一產品
- **相似度分數**：0.2682-0.5131

### 2. 商品名稱格式差異 (28.8% - 32案例)

#### 2.1 品牌標註格式差異
**案例4：Logitech鍵盤**
- e1: `Logitech 羅技 K120 有線鍵盤`
- e2: `【Logitech 羅技】K120 USB有線鍵盤(920-002584)`
- **分析**：品牌格式不同（空格 vs 【】），功能描述略有差異（有線 vs USB有線）
- **相似度分數**：0.4280-0.5314

#### 2.2 產品描述冗餘差異
**案例5：Logitech滑鼠**
- e1: `Logitech 羅技 【Logitech 羅技】M750 L 多工靜音無線滑鼠 大手版 黑色`
- e2: `【Logitech 羅技】M750L 大手版多工靜音無線滑鼠(石墨黑)`
- **分析**：e1中品牌重複出現，顏色描述不同（黑色 vs 石墨黑）
- **相似度分數**：極低（-0.0099到0.0557）

### 3. 產品配置和套裝差異 (19.8% - 22案例)

#### 3.1 套裝組合差異
**案例6：HyRead閱讀器**
- e1: `HyRead Gaze Mini+ 6吋電子紙閱讀器(石墨綠) 收納套組`
- e2: `【HyRead】Gaze Mini+ 6吋電子紙閱讀器(石墨綠)`
- **分析**：一個是套裝組合（含收納套），另一個是單機
- **相似度分數**：0.2943-0.4230

#### 3.2 配件差異
**案例7：LG投影機**
- e1: `LG 樂金 CineBeam Q 小銀河 雷射4K微型投影機+專屬支架`
- e2: `【LG 樂金】CineBeam Q 小銀河 雷射4K微型投影機(HU710PB)`
- **分析**：一個包含專屬支架，另一個只有型號標註
- **相似度分數**：0.0900

### 4. 技術規格描述差異 (11.7% - 13案例)

#### 4.1 材質描述差異
**案例8：PolarStar睡袋**
- e1: `PolarStar 台灣製 加大型纖維睡袋 (SGS檢驗 耐寒度 -12~7C)`
- e2: `【PolarStar 桃源戶外】台灣製 加大矽纖維睡袋 橘/藍 P16730(SGS檢驗 -12-7°C)`
- **分析**：材質描述從"纖維"變為"矽纖維"，溫度標註格式不同
- **相似度分數**：0.0789-0.2066

#### 4.2 功能描述差異
**案例9：OSLE按摩椅**
- e1: `OSLE 歐適樂 全自動家用太空艙按摩椅`
- e2: `【OSLE 歐適樂】太空艙按摩椅 電動雙導軌多功能推拿按摩椅`
- **分析**：功能描述詳細程度不同，一個簡潔，另一個詳細說明功能
- **相似度分數**：0.3594-0.4562

### 5. 產品系列和產品線混淆 (4.5% - 5案例)

#### 5.1 產品系列差異
**案例10：3M淨水器系列**
- e1: `S003淨水器替換濾心超值2入組(濾心型號:3US-F003-5)`
- e2: `【3M】S004 極淨便捷系列淨水器 濾淨除味可生飲省錢王-專業快速安裝`
- **分析**：S003和S004系列產品，雖然濾心通用但屬於不同產品系列
- **相似度分數**：0.1908-0.3380

## 錯誤嚴重程度分析

### 高嚴重度錯誤（相似度 < 0.2）- 27案例 (24.3%)
- **主要原因**：品牌重複標註、材質描述差異、型號完全不同
- **典型案例**：Logitech滑鼠重複品牌標註（-0.0099分）
- **建議**：需要數據清理和標準化

### 中等嚴重度錯誤（相似度 0.2-0.4）- 58案例 (52.3%)
- **主要原因**：型號微小差異、產品配置差異
- **典型案例**：MSI螢幕型號差異（0.2060-0.3257分）
- **建議**：需要改進型號匹配算法

### 低嚴重度錯誤（相似度 > 0.4）- 26案例 (23.4%)
- **主要原因**：商品名稱格式差異、品牌標註不一致
- **典型案例**：Logitech鍵盤格式差異（0.4280-0.5314分）
- **建議**：調整相似度閾值或改進預處理

## 模型表現比較

### 最佳表現模型
1. **15-text2vec-large-chinese**：僅3個False Negative
2. **13-qwen3-embedding-4b-lora**：10個False Negative
3. **10-qwen3-embedding-4b-lora**：14個False Negative

### 需要改進模型
1. **15-text2vec-base-chinese**：30個False Negative（最多）
2. **15-BAAI-bge-large-zh-v1.5**：19個False Negative
3. **15-multilingual-e5-small**：18個False Negative

## 改進建議

### 1. 數據預處理改進
- **品牌標註標準化**：統一【品牌】和"品牌"格式
- **型號清理**：移除重複的型號標註
- **顏色描述統一**：建立顏色同義詞字典（如：黑色=石墨黑）
- **規格單位標準化**：統一溫度、尺寸等單位格式

### 2. 相似度計算改進
- **型號權重增加**：型號匹配度應該有更高權重
- **同義詞處理**：建立產品同義詞字典
- **模糊匹配**：對型號實施模糊匹配算法
- **語義理解增強**：提升對產品功能描述的語義理解

### 3. 閾值優化
- **動態閾值**：不同產品類別使用不同相似度閾值
- **多階段匹配**：先進行嚴格匹配，再進行寬鬆匹配
- **置信度評分**：引入置信度評分機制

### 4. 模型訓練改進
- **負樣本增強**：增加更多困難負樣本
- **對比學習**：使用對比學習提升模型對細微差異的敏感度
- **多任務學習**：結合型號匹配、品牌識別等多任務

### 5. 後處理規則
- **商業邏輯規則**：添加基於商業常識的後處理規則
- **異常檢測**：檢測並處理明顯的異常匹配結果
- **人工校驗機制**：對低置信度預測進行人工校驗

## 結論

分析顯示，當前模型在處理以下情況時容易出現False Negative：
1. **型號微小差異**（如MD342CQPW vs MD342CQP）
2. **商品名稱格式不一致**
3. **產品套裝vs單品混淆**
4. **技術規格描述差異**

建議優先處理數據標準化和型號匹配算法改進，這將能解決約60%的False Negative問題。同時，針對不同模型的特點調整相似度閾值，可以進一步提升整體準確率。